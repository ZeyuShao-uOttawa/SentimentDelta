flowchart TB
    Start(["App Start"]) --> Init["App Initialization"]
    Init --> Config["Load Config"] & DB["Connect to MongoDB"] & Embeddings["Setup Embeddings"] & Managers["Initialize Managers"] & Scheduler["Start Scheduler"]
    Scheduler --> StockJob["Stock Price Job"] & YahooJob["Yahoo News Job"] & FinvizJob["Finviz News Job"] & AggJob["Aggregate Job"]
    StockJob --> StockFetch["Fetch Stock Prices"]
    StockFetch --> StockStore["Store Stock Prices"]
    YahooJob --> NewsFetch["Fetch News Articles"]
    FinvizJob --> NewsFetch
    NewsFetch --> NewsProcess["Process Articles<br>(Sentiment + Embeddings)"]
    NewsProcess --> NewsStore["Store News"]
    AggJob --> AggCalc["Calculate Aggregates"]
    AggCalc --> AggStore["Store Aggregates"]
    Maintenance["Migration / Update Scripts"] --> NewsStore

    Init:::init
    Config:::init
    DB:::init
    Embeddings:::init
    Managers:::init
    Scheduler:::init
    StockJob:::job
    YahooJob:::job
    FinvizJob:::job
    AggJob:::job
    StockFetch:::fetch
    StockStore:::store
    NewsFetch:::fetch
    NewsStore:::store
    AggStore:::store
    Maintenance:::maintenance
    
    classDef init fill:#E3F2FD,stroke:#1E88E5,stroke-width:2px
    classDef job fill:#E8F5E9,stroke:#2E7D32,stroke-width:2px
    classDef fetch fill:#FFF3E0,stroke:#EF6C00,stroke-width:2px
    classDef store fill:#F3E5F5,stroke:#6A1B9A,stroke-width:2px
    classDef maintenance fill:#ECEFF1,stroke:#455A64,stroke-width:2px